<p id="notice"><%= notice %></p>

<h1>Carritos</h1>

<table>
  <thead>
    <tr>
      <th>Cantidad productos</th>
      <th>producto</th>
      <th colspan="3">Acciones</th>
    </tr>
  </thead>

  <tbody>
    <% contador_computador = 0 %>
    <% contador_portatil = 0 %>
    <% contador_tablet = 0 %>
    <% @carritos.each do |carrito| %>
      <% if carrito.producto.tipo == "computador" %>
        <% if contador_computador > 0 %>
          <% contador_computador = contador_computador + 1 %>
        <% else %>
          <% contador_computador = contador_computador + 1 %>
          <tr>
            <td id="contador_computador"><%= contador_computador %></td>
            <td><%= carrito.producto.nombre %></td>
            <td><%= link_to 'Ver Detalles Producto', carrito.producto %></td>
          </tr>
        <% end %>
      <% end %>
      <% if carrito.producto.tipo == "portatil" %>
        <% if contador_portatil > 0 %>
          <% contador_portatil = contador_portatil + 1 %>
        <% else %>
          <% contador_portatil = contador_portatil + 1 %>
          <tr>
            <td id="contador_portatil"><%= contador_portatil %></td>
            <td><%= carrito.producto.nombre %></td>
            <td><%= link_to 'Ver Detalles Producto', carrito.producto %></td>
          </tr>
        <% end %>
      <% end %>
      <% if carrito.producto.tipo == "tablet" %>
        <% if contador_tablet > 0 %>
          <% contador_tablet = contador_tablet + 1 %>
        <% else %>
          <% contador_tablet = contador_tablet + 1 %>
          <tr>
            <td id="contador_tablet"><%= contador_tablet %></td>
            <td><%= carrito.producto.nombre %></td>
            <td><%= link_to 'Ver Detalles Producto', carrito.producto %></td>
          </tr>
        <% end %>
      <% end %>
    <% end %>

  </tbody>
</table>

<br>

<%= link_to 'Comprar', comprar_path(@carrito), method: :post %>

<script>
  console.log("Im working");
  $('#contador_computador').html("<%= contador_computador %>");
  $('#contador_portatil').html("<%= contador_portatil %>");
  $('#contador_tablet').html("<%= contador_tablet %>");
</script>
